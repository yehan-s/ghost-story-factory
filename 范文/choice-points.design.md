# Choice Points Design - 设计说明 (Design Rationale)

**文档用途：** 本说明阐明"选择点设计系统"的核心原则。它解释了如何在关键剧情节点设置明确的选项，引导剧情分支，同时将玩家限制在可控的框架内，避免跳出总体剧情。

---

## 设计哲学：结构化自由 (Structured Freedom)

**核心理念：** 给玩家"选择的自由感"，但实际上所有选择都在"设计好的轨道"上运行。

**类比：**
- ❌ 酒馆式：玩家可以输入任何东西（"我飞起来"/"我变成超人"）- 难以控制
- ✅ 选项式：玩家只能从 A/B/C/D 中选择 - 可预测、可控制

---

## 核心原则一：分层选择点架构 (Layered Choice Architecture)

**设计说明：** 选择点不是"平铺"的，而是**分层嵌套**的：关键选择点 → 普通选择点 → 微选择点。

### Level 1: 关键选择点（剧情分支点）

**定义：** 会导致**剧情主线分支**的选择。

**特征：**
- 数量少（每个角色线 2-3 个）
- 影响深远（决定结局类型）
- 不可逆（选择后无法回头）
- 明确标记（UI 上有特殊提示）

**示例：场景5 - 4:44清洁工出现**
```
【关键抉择】清洁工正在用泥印拖地，你必须做出选择：

A) 躲进监控室，保持安静 [遵守手册路线]
   → 主线分支A：标记 → 被拉入B3 → 结局A/B/C

B) 冲向楼梯逃跑 [违反手册路线]
   → 主线分支B：追猎 → 被追入B3 → 结局D/E

C) 打开念佛机干预 [特殊路线]
   → 特殊分支：激怒 → 提前高潮 → 结局F

[系统提示: 这个选择将决定你的命运]
```

---

### Level 2: 普通选择点（场景推进点）

**定义：** 推进当前场景，但**不改变主线分支**的选择。

**特征：**
- 数量中等（每场景 3-5 个）
- 影响局部（改变细节，但主线不变）
- 可补救（错误选择可以通过后续行为弥补）
- 影响共鸣度、道具消耗、旗标

**示例：场景2 - 第一次巡逻**
```
你在五楼听到了拍皮球的声音，你：

A) 走过去检查柱子后面
   → 触发"皮球事件"，共鸣度 +10

B) 返回中控室查看监控
   → 跳过"皮球事件"，但稍后会在其他场景补触发

C) 继续巡逻其他楼层
   → 延后触发，但4:44前必定触发

[系统: 无论选哪个，你都会进入场景3]
```

---

### Level 3: 微选择点（氛围塑造点）

**定义：** 不影响剧情，只影响**对话/氛围/玩家情绪**的选择。

**特征：**
- 数量多（每场景 5-10 个）
- 影响微小（改变几句对话）
- 可跳过（不选择也能继续）
- 增加代入感

**示例：场景1 - 交接班**
```
张叔说："别在五楼待太久。" 你：

A) 问："为什么？"
   → 张叔回避："...总之别去就对了。"

B) 点头不说话
   → 张叔欲言又止地看着你

C) 开玩笑："五楼闹鬼啊？"
   → 张叔脸色变了："别乱说。"

[系统: 这不影响剧情，但会改变玩家对五楼的预期]
```

---

## 核心原则二：选项设计的 4W 原则

### What: 选项的内容设计

**黄金规则：**
1. **每个选项都是"可行的"**（不给玩家"明显错误"的陷阱选项）
2. **每个选项的后果要"可预见"**（玩家能大致猜到会发生什么）
3. **至少有2个选项是"合理"的**（避免"伪选择"）

**反例：糟糕的选项设计**
```
❌ A) 冲过去抱住清洁工（明显送死，没人会选）
❌ B) 躲起来（唯一合理选项 = 伪选择）
```

**正例：好的选项设计**
```
✅ A) 躲进监控室（安全但被动）
✅ B) 逃向楼梯（主动但危险）
✅ C) 使用念佛机（消耗道具，风险中等）

[玩家能根据自己的风格选择：保守 vs 激进 vs 道具依赖]
```

---

### When: 何时触发选择点

**触发时机：**
1. **场景转换前** - 让玩家决定"下一步去哪"
2. **威胁出现时** - 让玩家决定"如何应对"
3. **NPC对话中** - 让玩家决定"如何回应"
4. **道具获得后** - 让玩家决定"是否使用"

**强制选择 vs 可跳过：**
- **关键选择点**：强制选择，倒计时30-60秒
- **普通选择点**：可跳过，默认选项（通常是"观察/等待"）
- **微选择点**：完全可跳过

---

### Where: 选择点的位置分布

**分布原则：**
- **场景开头**：1-2个微选择（建立氛围）
- **场景中段**：2-3个普通选择（推进剧情）
- **场景高潮**：1个关键选择（分支决策）

**密度控制：**
- 避免"选择疲劳"：连续5分钟以上不要超过3个选择
- 避免"选择空白"：连续3分钟以上必须有至少1个选择

---

### Why: 为什么设置这个选择

**每个选择点必须回答：**
1. **剧情目的**：推进什么剧情？揭示什么信息？
2. **玩家目的**：给玩家什么代入感？什么控制感？
3. **系统目的**：修改什么状态？触发什么事件？

**反例：无意义的选择**
```
❌ "你要喝水吗？A) 喝 B) 不喝"
（既不影响剧情，也不影响状态，纯粹浪费玩家时间）
```

---

## 核心原则三：限制玩家的"笼子设计" (Cage Design)

**设计说明：** 如何优雅地防止玩家"跳出剧情框架"。

### 方法1：物理限制（剧情锚点）

**原理：** 用物理障碍封锁"不应该去的地方"。

**示例：**
```
玩家选择："我想离开商场"

AI响应:
你冲向一楼的玻璃门，用力推——
门纹丝不动。
门把手上贴着泛黄的纸条：
"下班时间已过，明早10点再来。"

你的手机还是没有信号。

[选项重置]
A) 返回中控室
B) 去五楼查看异常
C) 去四楼巡逻

[系统: 玩家被引导回主线]
```

---

### 方法2：选项限制（预设范围）

**原理：** 只给玩家"框架内"的选项，不给"跳出"的选项。

**示例：场景4 - 失魂者危机**
```
失魂者正在走向围栏，你：

A) 冲过去拉住他 [物理接触]
B) 大声呼喊唤醒他 [语言干预]
C) 打开念佛机 [道具干预]
D) 保持距离观察 [不干预]

[注意: 没有"离开现场"的选项]
[原因: 这是强制剧情点，玩家必须做出选择]
```

---

### 方法3：后果教育（惩罚机制）

**原理：** 玩家如果强行跳出框架，会受到"温和惩罚"。

**示例：玩家连续选择"逃避"**
```
[第1次逃避]
玩家选择："我不管失魂者，返回中控室"
AI: 你转身离开，但心里很不安...
[系统: 共鸣度 +10，旗标"逃避_失魂者" = True]

[第2次逃避]
玩家选择："我躲在中控室不出去"
AI: 你躲在中控室，但对讲机突然响起刺耳的电流...
"滋——救...救命...滋——"
是...失魂者的声音？
[系统: 共鸣度 +15，触发"负罪感"状态]

[第3次逃避 → 强制惩罚]
AI: 你的手机屏幕突然亮起——
上面是一张照片。
失魂者从五楼坠落的照片。
时间戳：刚才。

你感到一阵眩晕...
[系统: 共鸣度 +30 → 65%，触发"精神崩溃"分支]
[系统: 强制进入场景5，但以"负面开局"进入]
```

---

### 方法4：引导暗示（软性拉回）

**原理：** 用环境/NPC/提示引导玩家回到主线。

**示例：玩家在场景2停留过久**
```
[玩家连续3次选择"在中控室等待"]

AI自动触发:
你靠在椅子上，想等到天亮...

但对讲机突然爆出一阵电流：
"滋——保安？保安在吗？——滋——"
那是...张叔的声音？
但他不是已经下班了吗？

[强制选项]
A) 回应对讲机
B) 去五楼查看
C) 去四楼巡逻

[系统: 不再提供"等待"选项，玩家必须行动]
```

---

## 核心原则四：选项 → 后果的映射表

**设计说明：** 每个选项都应该有**明确的**、**可追溯的**后果。

### 后果类型分类

**1. 立即后果（Immediate）**
```
玩家选择: "打开念佛机"
立即后果:
- 共鸣度 -15
- 念佛机电量 -20%
- 附近实体（等级1-2）退缩
- 附近实体（等级3）激怒
```

**2. 延迟后果（Delayed）**
```
玩家选择: "不干预失魂者"
延迟后果:
- 场景4结束时：失魂者坠落
- 场景5开始时：玩家获得"负罪感"状态
- 场景6结束时：可能触发"坏结局"
```

**3. 分支后果（Branching）**
```
玩家选择: "躲进监控室"
分支后果:
- 进入"主线分支A：标记"
- 后续所有场景按"标记分支"展开
- 解锁结局A/B/C，锁定结局D/E/F
```

**4. 累积后果（Cumulative）**
```
玩家连续3次选择: "使用道具"
累积后果:
- 旗标"道具依赖" = True
- 特殊对话触发："你太依赖道具了..."
- 结局时影响评价："道具大师"
```

---

## 核心原则五：关键剧情点清单 (Critical Plot Points)

**设计说明：** 列出**必经的**剧情节点，无论玩家如何选择都会触发。

### 保安线的关键剧情点

**必经点1：04:44清洁工出现**
```
触发条件: 时间到达 04:44 AM（无论玩家在哪）
强制事件: 清洁工在五楼出现
强制选择: 玩家必须选择"躲/逃/对抗"之一
剧情锁: 此后进入"主线分支"，不可再回到"探索期"
```

**必经点2：进入B3**
```
触发条件: 场景5结束
强制事件: 玩家被"拉"或"追"入B3
剧情锁: 此后只能在B3活动，不能返回其他楼层
```

**必经点3：与白衣女子对话**
```
触发条件: 进入B3数据中心
强制事件: 白衣女子揭示真相
剧情锁: 玩家获得"八棺"相关信息
```

**必经点4：阵眼祭坛抉择**
```
触发条件: 收集足够信息/道具
强制事件: 玩家面对祭坛
强制选择: 修复/摧毁/献祭（决定最终结局）
```

---

### 分支点与必经点的关系

```
场景1 → 场景2 → 场景3 → 场景4
  ↓       ↓       ↓       ↓
[探索期 - 可选路径]

→ 场景5 [必经点1: 04:44] ← 关键选择
       ↓             ↓
   分支A: 标记   分支B: 追猎
       ↓             ↓
→ 场景6 [必经点2: B3入口] ←
       ↓
   [B3探索期 - 可选路径]
       ↓
→ [必经点3: 白衣女子]
       ↓
   [收集阶段 - 可选路径]
       ↓
→ [必经点4: 祭坛] ← 最终选择
       ↓       ↓       ↓
   结局A   结局B   结局C
```

---

## 核心原则六：选项数量与质量的平衡

### 黄金规则

**2-4法则：**
- 最少2个选项（否则不是"选择"）
- 最多4个选项（超过4个会"选择瘫痪"）
- 最佳是3个选项（经典的"好/中/坏"或"A/B/C"）

**示例：3选项设计**
```
清洁工正在接近，你：

A) 躲进监控室 [保守/安全]
B) 冲向楼梯逃跑 [激进/危险]
C) 使用念佛机 [平衡/消耗资源]

[玩家心理]
- 保守型玩家 → 选A
- 冒险型玩家 → 选B
- 策略型玩家 → 选C（权衡利弊）
```

**示例：4选项设计（加入"观察/等待"）**
```
失魂者走向围栏，你：

A) 冲过去拉住他 [高风险高回报]
B) 大声呼喊 [中风险中回报]
C) 使用念佛机 [低风险低回报]
D) 保持距离观察 [零风险零回报，但触发坏结局]

[D选项的作用: 给犹豫不决的玩家一个"什么都不做"的选项]
```

---

## 数据结构定义

### 选择点定义

```json
{
  "choice_point_id": "scene5_cleaner_encounter",
  "type": "CRITICAL",
  "scene": "场景5",
  "trigger_condition": {
    "time": "04:44 AM",
    "location": "五楼中庭"
  },
  "prompt": "清洁工正在用泥印拖地。你必须做出选择：",
  "options": [
    {
      "id": "A",
      "text": "躲进监控室，保持安静",
      "tags": ["保守", "遵守手册"],
      "immediate_consequences": {
        "location": "监控室",
        "resonance": 0,
        "flags": {"玩家_已躲藏": true}
      },
      "branch_consequence": "主线分支A：标记",
      "next_scene": "场景6A"
    },
    {
      "id": "B",
      "text": "冲向楼梯逃跑",
      "tags": ["激进", "违反手册"],
      "immediate_consequences": {
        "location": "楼梯",
        "resonance": +15,
        "flags": {"玩家_已逃跑": true}
      },
      "branch_consequence": "主线分支B：追猎",
      "next_scene": "场景6B"
    },
    {
      "id": "C",
      "text": "打开念佛机",
      "tags": ["策略", "消耗道具"],
      "preconditions": {
        "inventory": "念佛机",
        "battery": ">0"
      },
      "immediate_consequences": {
        "resonance": -15,
        "inventory.念佛机.battery": -20,
        "entities.清洁工.state": "ENRAGED"
      },
      "branch_consequence": "特殊分支：激怒",
      "next_scene": "场景6C"
    }
  ],
  "timeout": 60,
  "default_option": null,
  "can_skip": false,
  "ui_hint": "[关键抉择] 这将决定你的命运"
}
```

---

## 设计哲学

**核心理念：** Choice Points 是"剧本设计"与"玩家自主"的平衡点。它让玩家觉得"我在控制剧情"，但实际上所有可能性都已被设计师预见和控制。

**质量标尺：**
- 每个选项都是"可玩的"（不是陷阱）
- 每个选项都有"后果"（不是伪选择）
- 选项数量适中（2-4个）
- 关键点有明确标记（玩家知道重要性）
- 玩家永远在框架内（优雅地限制自由）

